<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tạo Mã QR Chuyển Khoản Chuyên Nghiệp</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Reset và font */
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }

    :root {
      --primary-color: #6366f1;
      --secondary-color: #a855f7;
      --dark-color: #1f2a44;
      --light-color: #f8fafc;
      --gray-color: #94a3b8;
      --border-color: #e2e8f0;
      --success-color: #10b981;
      --error-color: #ef4444;
      --warning-color: #f59e0b;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --gradient: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--dark-color);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      line-height: 1.5;
      color: var(--light-color);
      overflow-x: hidden;
      position: relative;
    }

    /* Particle background */
    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 0;
      opacity: 0.5;
    }

    .container {
      background: rgba(31, 42, 68, 0.85);
      padding: 40px;
      border-radius: 20px;
      box-shadow: var(--shadow-xl);
      max-width: 600px;
      width: 100%;
      text-align: center;
      overflow: hidden;
      position: relative;
      z-index: 1;
      transform: translateY(20px);
      opacity: 0;
      animation: fadeInUp 0.6s forwards 0.3s;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    @keyframes fadeInUp {
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    h1 {
      font-size: 32px;
      color: white;
      margin-bottom: 30px;
      font-weight: 700;
      letter-spacing: -0.5px;
      position: relative;
      display: inline-block;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    h1::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--gradient);
      border-radius: 3px;
      box-shadow: 0 2px 10px rgba(168, 85, 247, 0.5);
    }

    /* Form */
    #qrForm {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .form-group {
      position: relative;
    }

    .form-group label {
      display: block;
      text-align: left;
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--gray-color);
      font-weight: 500;
      transition: var(--transition);
    }

    input {
      padding: 16px;
      font-size: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      outline: none;
      background: rgba(0, 0, 0, 0.2);
      transition: var(--transition);
      width: 100%;
      color: white;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    input:hover {
      border-color: rgba(255, 255, 255, 0.3);
    }

    input:focus {
      border-color: var(--primary-color);
      background: rgba(0, 0, 0, 0.3);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3), inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    input::placeholder {
      color: var(--gray-color);
      opacity: 0.7;
    }

    /* Custom select */
    .custom-select {
      position: relative;
      user-select: none;
      transition: var(--transition);
      text-align: left;
    }

    .custom-select label {
      display: block;
      text-align: left;
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--gray-color);
      font-weight: 500;
      transition: var(--transition);
    }

    .select-selected {
      background: rgba(0, 0, 0, 0.2);
      padding: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: var(--transition);
      color: white;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .select-selected:hover {
      background: rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .select-items {
      position: absolute;
      background: var(--dark-color);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      top: calc(100% + 5px);
      left: 0;
      right: 0;
      z-index: 99;
      max-height: 300px;
      overflow-y: auto;
      display: none;
      flex-direction: column;
      opacity: 0;
      transform: translateY(10px);
      transform-origin: top;
      transition: var(--transition);
      box-shadow: var(--shadow-lg);
    }

    .select-items.show {
      display: flex;
      opacity: 1;
      transform: translateY(0);
    }

    .select-items div {
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: var(--transition);
      color: white;
    }

    .select-items div:hover {
      background: rgba(99, 102, 241, 0.2);
    }

    .select-items img, .select-selected img {
      width: 24px;
      height: 24px;
      object-fit: contain;
      flex-shrink: 0;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    }

    /* Button */
    button {
      padding: 16px;
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      background: var(--gradient);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 10px;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
    }

    button:active {
      transform: translateY(0);
    }

    button::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0) 37%,
        rgba(255, 255, 255, 0.8) 45%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transform: rotate(30deg);
      transition: all 0.6s ease;
      opacity: 0;
    }

    button:hover::after {
      animation: shine 1.5s ease infinite;
      opacity: 1;
    }

    @keyframes shine {
      0% {
        left: -50%;
        top: -50%;
      }
      100% {
        left: 150%;
        top: 150%;
      }
    }

    #qrCode {
      margin-top: 30px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 16px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 300px;
      position: relative;
      overflow: hidden;
      transition: var(--transition);
      border: 1px dashed rgba(255, 255, 255, 0.1);
    }

    #qrCode:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
      border-color: rgba(99, 102, 241, 0.5);
    }

    #qrCode::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
      opacity: 0;
      transition: var(--transition);
    }

    #qrCode:hover::before {
      opacity: 1;
    }

    #qrCode img {
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      max-width: 250px;
      transition: var(--transition);
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #qrCode img:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }

    /* Loading spinner */
    .spinner {
      display: none;
      width: 50px;
      height: 50px;
      border: 4px solid rgba(99, 102, 241, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }

    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Toast notification */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      background: var(--dark-color);
      color: white;
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: center;
      gap: 12px;
      transform: translateX(150%);
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 1000;
      border-left: 4px solid var(--primary-color);
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      border-left-color: var(--success-color);
      background: rgba(16, 185, 129, 0.15);
    }

    .toast.error {
      border-left-color: var(--error-color);
      background: rgba(239, 68, 68, 0.15);
    }

    .toast.warning {
      border-left-color: var(--warning-color);
      background: rgba(245, 158, 11, 0.15);
    }

    .toast-icon {
      font-size: 20px;
    }

    .toast.success .toast-icon {
      color: var(--success-color);
    }

    .toast.error .toast-icon {
      color: var(--error-color);
    }

    .toast.warning .toast-icon {
      color: var(--warning-color);
    }

    /* Popup */
    .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 9999;
      backdrop-filter: blur(5px);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .popup.show {
      opacity: 1;
    }

    .popup-content {
      background: var(--dark-color);
      padding: 40px;
      border-radius: 16px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      box-shadow: var(--shadow-xl);
      transform: scale(0.9);
      opacity: 0;
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }

    .popup.show .popup-content {
      transform: scale(1);
      opacity: 1;
    }

    .popup-content::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        transparent 0%,
        transparent 50%,
        rgba(99, 102, 241, 0.1) 60%,
        transparent 70%,
        transparent 100%
      );
      transform: rotate(30deg);
      animation: popupShine 6s linear infinite;
      z-index: 0;
    }

    @keyframes popupShine {
      0% {
        transform: rotate(30deg) translate(-25%, -25%);
      }
      100% {
        transform: rotate(30deg) translate(25%, 25%);
      }
    }

    .popup h2 {
      margin-bottom: 20px;
      color: white;
      font-size: 24px;
      font-weight: 700;
      position: relative;
      z-index: 1;
    }

    .popup p {
      margin-bottom: 30px;
      color: var(--gray-color);
      line-height: 1.6;
      position: relative;
      z-index: 1;
    }

    .popup button {
      position: relative;
      z-index: 1;
      padding: 12px 24px;
      background: var(--gradient);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }

    .popup button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.6);
    }

    /* Floating animation */
    .floating {
      animation: floating 3s ease-in-out infinite;
    }

    @keyframes floating {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Glow effect */
    .glow {
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from {
        box-shadow: 0 0 5px rgba(99, 102, 241, 0.5);
      }
      to {
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.8);
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 30px 20px;
        max-width: 100%;
      }
      
      h1 {
        font-size: 26px;
      }
      
      input, .select-selected, button {
        padding: 14px;
      }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--secondary-color);
    }

    /* Tooltip */
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 200px;
      background-color: var(--dark-color);
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 8px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 12px;
      box-shadow: var(--shadow-md);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    @keyframes borderRotate {
      100% {
        transform: rotate(1turn);
      }
    }

    /* Water ripple effect */
    .ripple {
      position: relative;
      overflow: hidden;
    }

    .ripple:after {
      content: "";
      display: block;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
      background-repeat: no-repeat;
      background-position: 50%;
      transform: scale(10, 10);
      opacity: 0;
      transition: transform .5s, opacity 1s;
    }

    .ripple:active:after {
      transform: scale(0, 0);
      opacity: .3;
      transition: 0s;
    }

    /* Pulse animation */
    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7);
      }
      70% {
        transform: scale(1);
        box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
      }
      100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
      }
    }
  </style>
</head>
<body>
  <!-- Particle Background -->
  <div id="particles-js"></div>
  
  <!-- Welcome Popup -->
  <div class="popup" id="welcomePopup">
    <div class="popup-content animate__animated animate__zoomIn">
      <h2>Chào Mừng Bạn!</h2>
      <p>Chúng tôi rất vui khi bạn ghé thăm trang web của chúng tôi. Hãy khám phá các tính năng tuyệt vời mà chúng tôi mang đến cho bạn.<br><br>Xin lưu ý rằng đây không phải web fake bill mà là web tạo QR thanh toán nhanh được dùng các API của VietQR và nó hoàn toàn hợp pháp.</p>
      <button onclick="closePopup()" class="ripple">Bắt đầu ngay</button>
    </div>
  </div>
  
  <!-- Main Container -->
  <div class="container animated-border">
    <h1 class="animate__animated animate__fadeInDown">Tạo Mã QR Thanh Toán</h1>
    <form id="qrForm">
      <div class="form-group">
        <label for="accountName"><i class="fas fa-user"></i> Tên người nhận</label>
        <input type="text" id="accountName" placeholder="Nhập tên người nhận" required>
      </div>
      
      <div class="form-group">
        <label for="accountNo"><i class="fas fa-credit-card"></i> Số tài khoản</label>
        <input type="text" id="accountNo" placeholder="Nhập số tài khoản" required>
      </div>
  
      <div class="custom-select" id="bankSelect">
        <label><i class="fas fa-university"></i> Ngân hàng</label>
        <div class="select-selected">Chọn ngân hàng</div>
        <div class="select-items"></div>
      </div>
  
      <div class="form-group">
        <label for="amount"><i class="fas fa-money-bill-wave"></i> Số tiền (VNĐ)</label>
        <input type="number" id="amount" placeholder="Nhập số tiền (không bắt buộc)">
      </div>
      
      <div class="form-group">
        <label for="description"><i class="fas fa-comment"></i> Nội dung</label>
        <input type="text" id="description" placeholder="Nhập nội dung chuyển khoản">
      </div>
      
      <button type="submit" id="generateBtn" class="ripple pulse">
        <span><i class="fas fa-qrcode"></i> Tạo QR</span>
      </button>
    </form>
  
    <div id="qrCode">
      <div class="spinner" id="spinner"></div>
      <div id="qrResult"></div>
    </div>
  </div>
  
  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <span class="toast-icon"><i class="fas fa-check"></i></span>
    <span class="toast-message">QR code đã được tạo thành công!</span>
  </div>
  
  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    const banks = [
      { id: "ABB", name: "ABBANK", logo: "https://i.postimg.cc/7hmLngvc/ABBANK.png" },
      { id: "MBBANK", name: "MB Bank", logo: "https://i.postimg.cc/zGPJBz5C/MB-Bank.png" },
      { id: "AGRIBANK", name: "Agribank", logo: "https://i.postimg.cc/B65btrmJ/Agribank-Plus.png" },
      { id: "SACOMBANK", name: "Sacombank", logo: "https://i.postimg.cc/HW771Nwv/Sacombank-m-Banking.png" },
      { id: "VIETCOMBANK", name: "Vietcombank", logo: "https://i.postimg.cc/bw4TpnG1/VCB-Digibank.png" },
      { id: "VIETINBANK", name: "VietinBank", logo: "https://i.postimg.cc/Gm4QWKpc/Vietin-Bank-i-Pay.png" },
      { id: "CAKE", name: "CAKE Bank", logo: "https://api.vietqr.io/img/CAKE.png" },
      { id: "CIMB", name: "CIMB Bank", logo: "https://api.vietqr.io/img/CIMB.png" },
      { id: "ACB", name: "ACB", logo: "https://api.vietqr.io/img/ACB.png" },
      { id: "BACABANK", name: "Bac A Bank", logo: "https://i.postimg.cc/63xTWWLH/BAC-A-BANK-Mobile-Banking.png" },
      { id: "BAOVIETBANK", name: "Bảo Việt Bank", logo: "https://i.postimg.cc/bwMs5HGf/IMG-4553.png" },
      { id: "BIDV", name: "BIDV", logo: "https://api.vietqr.io/img/BIDV.png" },
      { id: "EXIMBANK", name: "Eximbank", logo: "https://i.postimg.cc/fWjSb9PY/Eximbank-EDigi.png" },
      { id: "HDB", name: "HDBank", logo: "https://i.postimg.cc/rpBRDCcN/HDBank.png" },
      { id: "HLBANK", name: "Hong Leong Bank", logo: "https://i.postimg.cc/kgDmL08B/HLB-Connect-Vietnam.png" },
      { id: "IBK", name: "IBK Bank", logo: "https://api.vietqr.io/img/IBK.png" },
      { id: "INDOVINABANK", name: "Indovina Bank", logo: "https://i.postimg.cc/yY1Byg8h/IVB-Mobile-Banking.png" },
      { id: "KIENLONGBANK", name: "KienlongBank", logo: "https://i.postimg.cc/FFgNSgNs/Kienlong-Bank-Plus.png" },
      { id: "LPB", name: "LienVietPostBank", logo: "https://api.vietqr.io/img/LPB.png" },
      { id: "MSB", name: "MSB", logo: "https://api.vietqr.io/img/MSB.png" },
      { id: "NAMABANK", name: "Nam A Bank", logo: "https://i.postimg.cc/437XHDNr/NAM-A-BANK-OPEN-BANKING.png" },
      { id: "NCB", name: "NCB", logo: "https://api.vietqr.io/img/NCB.png" },
      { id: "OCB", name: "OCB", logo: "https://api.vietqr.io/img/OCB.png" },
      { id: "OCEANBANK", name: "OceanBank", logo: "https://api.vietqr.io/img/OCEANBANK.png" },
      { id: "PGBANK", name: "PG Bank", logo: "https://i.postimg.cc/Pfmr4nzH/PGBank-App.png" },
      { id: "PBVN", name: "Public Bank Vietnam", logo: "https://api.vietqr.io/img/PBVN.png" },
      { id: "PVCOMBANK", name: "PVcomBank", logo: "https://i.postimg.cc/VvBfLXLv/PVcom-Bank-m-Pos.png" },
      { id: "SAIGONBANK", name: "SaigonBank", logo: "https://i.postimg.cc/PJZLbLfn/SAIGONBANK-Smart-Banking.png" },
      { id: "SCB", name: "SCB", logo: "https://api.vietqr.io/img/SCB.png" },
      { id: "SEABANK", name: "SeABank", logo: "https://i.postimg.cc/ht0d37LS/Se-AMobile.png" },
      { id: "SHB", name: "SHB", logo: "https://api.vietqr.io/img/SHB.png" },
      { id: "SHBVN", name: "Shinhan Bank", logo: "https://i.postimg.cc/c6yxdXNV/Shinhan-SOL-Vietnam.png" },
      { id: "STANDARDCHARTERED", name: "Standard Chartered", logo: "https://i.postimg.cc/Jz3nzV0K/SC-Mobile-Vietnam.png" },
      { id: "TPB", name: "TPBank", logo: "https://i.postimg.cc/RFdK6J0s/TPBank-Mobile.png" },
      { id: "UNITEDOVERSEAS", name: "United Overseas Bank", logo: "https://api.vietqr.io/img/UOB.png" },
      { id: "VIB", name: "VIB", logo: "https://api.vietqr.io/img/VIB.png" },
      { id: "VIETABANK", name: "VietABank", logo: "https://i.postimg.cc/BQV5BFBR/Viet-ABank-Ez-Mobile.png" },
      { id: "VIETBANK", name: "VietBank", logo: "https://api.vietqr.io/img/VIETBANK.png" },
      { id: "VPBANK", name: "VPBank", logo: "https://i.postimg.cc/SK8GsK83/VPBank-NEO.png" },
      { id: "VRB", name: "VRB", logo: "https://api.vietqr.io/img/VRB.png" },
      { id: "WOORIBANK", name: "Woori Bank", logo: "https://i.postimg.cc/h40pThwq/Woori-WON-Vietnam.png" }
    ];

    let selectedBank = null;

    // Initialize particles.js
    function initParticles() {
      particlesJS("particles-js", {
        "particles": {
          "number": {
            "value": 80,
            "density": {
              "enable": true,
              "value_area": 800
            }
          },
          "color": {
            "value": "#6366f1"
          },
          "shape": {
            "type": "circle",
            "stroke": {
              "width": 0,
              "color": "#000000"
            },
            "polygon": {
              "nb_sides": 5
            }
          },
          "opacity": {
            "value": 0.5,
            "random": true,
            "anim": {
              "enable": true,
              "speed": 1,
              "opacity_min": 0.1,
              "sync": false
            }
          },
          "size": {
            "value": 3,
            "random": true,
            "anim": {
              "enable": true,
              "speed": 2,
              "size_min": 0.1,
              "sync": false
            }
          },
          "line_linked": {
            "enable": true,
            "distance": 150,
            "color": "#6366f1",
            "opacity": 0.2,
            "width": 1
          },
          "move": {
            "enable": true,
            "speed": 1,
            "direction": "none",
            "random": true,
            "straight": false,
            "out_mode": "out",
            "bounce": false,
            "attract": {
              "enable": true,
              "rotateX": 600,
              "rotateY": 1200
            }
          }
        },
        "interactivity": {
          "detect_on": "canvas",
          "events": {
            "onhover": {
              "enable": true,
              "mode": "grab"
            },
            "onclick": {
              "enable": true,
              "mode": "push"
            },
            "resize": true
          },
          "modes": {
            "grab": {
              "distance": 140,
              "line_linked": {
                "opacity": 0.5
              }
            },
            "bubble": {
              "distance": 400,
              "size": 40,
              "duration": 2,
              "opacity": 8,
              "speed": 3
            },
            "repulse": {
              "distance": 200,
              "duration": 0.4
            },
            "push": {
              "particles_nb": 4
            },
            "remove": {
              "particles_nb": 2
            }
          }
        },
        "retina_detect": true
      });
    }

    // Hiệu ứng popup
    function showPopup() {
      const popup = document.getElementById('welcomePopup');
      popup.style.display = 'flex';
      setTimeout(() => {
        popup.classList.add('show');
      }, 10);
    }

    function closePopup() {
      const popup = document.getElementById('welcomePopup');
      popup.classList.remove('show');
      setTimeout(() => {
        popup.style.display = 'none';
      }, 300);
    }

    // Hiệu ứng toast
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = toast.querySelector('.toast-message');
      const toastIcon = toast.querySelector('.toast-icon');
      
      // Set icon based on type
      if (type === 'success') {
        toastIcon.innerHTML = '<i class="fas fa-check"></i>';
      } else if (type === 'error') {
        toastIcon.innerHTML = '<i class="fas fa-times"></i>';
      } else if (type === 'warning') {
        toastIcon.innerHTML = '<i class="fas fa-exclamation"></i>';
      }
      
      toast.className = `toast ${type}`;
      toastMessage.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Tạo custom select
    function createCustomSelect(items, containerId, type) {
      const select = document.getElementById(containerId);
      const selected = select.querySelector('.select-selected');
      const optionsContainer = select.querySelector('.select-items');

      function renderOptions() {
        optionsContainer.innerHTML = '';
        items.forEach(item => {
          const option = document.createElement('div');
          option.innerHTML = `<img src="${item.logo}" alt="${item.name}" loading="lazy">${item.name}`;
          option.addEventListener('click', () => {
            selected.innerHTML = `<img src="${item.logo}" alt="${item.name}" loading="lazy">${item.name}`;
            optionsContainer.classList.remove('show');

            if (type === 'bank') {
              selectedBank = item;
            }
          });
          optionsContainer.appendChild(option);
        });
      }

      selected.onclick = (e) => {
        e.stopPropagation();
        const isVisible = optionsContainer.classList.contains('show');
        document.querySelectorAll('.select-items').forEach(el => el.classList.remove('show'));
        if (!isVisible) {
          optionsContainer.classList.add('show');
        }
      };

      renderOptions();
    }

    // Đóng select khi click ra ngoài
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.custom-select')) {
        document.querySelectorAll('.select-items').forEach(item => {
          item.classList.remove('show');
        });
      }
    });

    // Xử lý form submit
    document.getElementById('qrForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const accountName = document.getElementById('accountName').value;
      const accountNo = document.getElementById('accountNo').value;
      const amount = document.getElementById('amount').value;
      const description = document.getElementById('description').value;
      
      const qrResult = document.getElementById('qrResult');
      const spinner = document.getElementById('spinner');
      const generateBtn = document.getElementById('generateBtn');
      
      // Validate
      if (!selectedBank) {
        showToast('Vui lòng chọn ngân hàng!', 'error');
        return;
      }
      
      if (!accountName || !accountNo) {
        showToast('Vui lòng nhập đầy đủ thông tin!', 'error');
        return;
      }
      
      // Hiển thị loading
      qrResult.innerHTML = '';
      spinner.style.display = 'block';
      generateBtn.disabled = true;
      generateBtn.innerHTML = '<span><i class="fas fa-spinner fa-spin"></i> Đang tạo...</span>';
      
      // Giả lập delay để thấy hiệu ứng loading
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Tạo QR code
      const qrUrl = `https://img.vietqr.io/image/${selectedBank.id}-${accountNo}-compact.png?amount=${amount}&addInfo=${encodeURIComponent(description)}&accountName=${encodeURIComponent(accountName)}`;
      
      qrResult.innerHTML = `<img src="${qrUrl}" alt="QR Code" class="floating">`;
      spinner.style.display = 'none';
      generateBtn.disabled = false;
      generateBtn.innerHTML = '<span><i class="fas fa-qrcode"></i> Tạo QR</span>';
      
      // Hiệu ứng toast
      showToast('QR code đã được tạo thành công!');
      
      // Thêm hiệu ứng cho QR code
      const qrImg = qrResult.querySelector('img');
      qrImg.style.animation = 'fadeInUp 0.8s ease-out';
      
      // Thêm hiệu ứng glow sau khi QR code hiển thị
      setTimeout(() => {
        qrImg.classList.add('glow');
      }, 100);
    });

    // Khởi tạo
    document.addEventListener('DOMContentLoaded', function() {
      // Khởi tạo particles background
      initParticles();
      
      // Khởi tạo select
      createCustomSelect(banks, 'bankSelect', 'bank');
      
      // Hiển thị popup sau 500ms
      setTimeout(showPopup, 500);
      
      // Thêm hiệu ứng hover cho các input
      const inputs = document.querySelectorAll('input');
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.querySelector('label').style.color = 'var(--primary-color)';
        });
        
        input.addEventListener('blur', function() {
          this.parentElement.querySelector('label').style.color = 'var(--gray-color)';
        });
      });
      
      // Thêm hiệu ứng khi trang load xong
      setTimeout(() => {
        document.querySelector('.container').classList.add('animate__animated', 'animate__fadeInUp');
      }, 800);
    });
  </script>
</body>
</html>
